<main>
    <div ng-repeat="post in vm.posts | orderBy: '-upvotes'" class="post--single">
        <i ng-show="post.upvotes > 10" class="icon icon-star hot"></i>

        <span class="post--single-upvote" ng-class="post.classVote">
            <i ng-click="vm.upvote(post)" class="icon icon-arrow-up up"></i>
            <span>{{ post.upvotes }}</span>
            <i ng-click="vm.downvote(post)" class="icon icon-arrow-down down"></i>
        </span>

        <div class="post--single-content">
            <h3>
                <a ng-show="post.link" href="{{ post.link }}" target="_blank">
                    {{ post.title }}
                </a>

                <span ng-hide="post.link">
                    {{ post.title }}
                </span>
            </h3>
            <div>
                <small am-time-ago="post.date"></small>
                <small ng-show="post.author">by @{{ post.author }}</small>
                <small ng-hide="post.author">by anonymous</small>
            </div>
            <p>{{ post.desc }}</p>
        </div>

        <div class="footer">
            <a href="#/posts/{{ post.id }}">Comments <small>({{ post.comments.length }})</small></a>
            <a ng-show="post.link" href="{{ post.link }}" target="_blank" class="source"><i class="icon icon-link"></i> {{ post.link }}</a>
        </div>
    </div>
</main>

<aside>
    <form ng-submit="vm.addPost()">
        <h3>Submit your story</h3>
        <div class="form-group">
            <input placeholder="Title" ng-model="vm.newPost.title" type="text" title="Title">
            <input placeholder="Link" ng-model="vm.newPost.link" type="text" title="Link">
            <textarea placeholder="Description" ng-model="vm.newPost.desc" title="Description"></textarea>
            <input type="submit" value="Post">
        </div>
    </form>
</aside>